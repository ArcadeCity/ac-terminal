<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/neon-animation/neon-animation.html">
<link rel="import" href="../bower_components/ac-button/ac-button.html">
<link rel="import" href="../bower_components/ac-icon/ac-icon.html">
<link rel="import" href="../bower_components/iron-localstorage/iron-localstorage.html">

<link rel="import" href="ac-sizeview.html">

<dom-module id="ac-intro">
  <template>
    <style>
 :host {
    display: block;
    margin: 0px;
    padding: 0px;
    --title-big: 40px;
    --title-bigheight: 46px;
    width: 100%;
    height: 100%;
  }

  .total {
    width: 100%;
    height: 100%;
    box-sizing: border-box;
    padding: 10vw;
    margin: 0px;
    background-color: var(--ac-base);
    text-align: center;
    /*background: url(../images/AC-intro-bg2b.png) #1d143f;
    background-repeat: no-repeat;
    background-position: bottom;
    background-size: auto 100%;*/
  }


  .topback {
      width: 100%;
      background-color: var(--ac-base);
      @apply(--layout-horizontal);
      @apply(--layout-center-center);
      box-sizing: border-box;
      padding: 5vh 5vw 0px 5vw;
      height: 8%;
    }


    .topback ac-icon {
      opacity: 0.5;
    }
    .topback ac-button {
      @apply(--base-shadow);
      opacity: 0.9;
    }

  neon-animated-pages {
    height: 92%;
  }

    .horiz {
    @apply(--layout-horizontal);
    @apply(--layout-center-center);
  }

  .vertic {
    @apply(--layout-vertical);
    @apply(--layout-center-center);
  }

  .maxwidth {
    width: 100%;
    max-width: 400px;
  }
   .maxwidth ac-input {
    width: 100%;
    max-width: 400px;
  }

  h1 {
    @apply(--ac-font-h1);
    text-align: center;
    white-space: normal;
    font-size: var(--title-big);
    line-height: var(--title-bigheight);
  }

  h2 {
    @apply(--ac-font-h2);
  }

  h3 {
    @apply(--ac-font-h3);
  }

  h4 {
    @apply(--ac-font-h4);
  }

  p {
    @apply(--ac-font-body1);
  }

  a {
    @apply(--ac-font-ahref);
  }

  small {
    @apply(--ac-font-small);
  }

  .white {
    color: var(--ac-white);
  }

  .blue {
    color: var(--ac-blue);
  }

  .red {
    color: var(--ac-red);
  }

  .yellow {
    color: var(--ac-yellow);
  }


  .yesnobtns {
    width: 100%;
  }

  .yesno {
    width: 80%;
    max-width: 280px;

    margin: 5px;
  }

  .whitespace {
    width: 100%;
    height: 20px;
  }

  .centervlak {
    width: 100%;
    max-width: 400px;
  }
  .flex {
    @apply(--layout-flex);
  }

  .inner {
    width: 90%;
    height: 76%;
    @apply(--layout-vertical);
    @apply(--layout-center);
    @apply(--layout-start-justified);
    /*@apply(--layout-wrap);*/
    box-sizing: border-box;
    /*background-color: red;*/
  }

  .logo_canvas {
    @apply(--layout-vertical);
    @apply(--layout-center-center);
    box-sizing: border-box;
    padding: 5vh 10vw 10vw 10vw;
  }

  .logo {
    @apply(--layout-vertical);
    @apply(--layout-center-center);
  }

  .logo p {
    @apply(--montserrat-bold);
    color: var(--ac-white);
    font-size: var(--title-big);
    line-height: var(--title-bigheight);
  }

  .logo_whitespace {
    width: 100%;
    height: 28vh;
  }

    .logo_canvas ac-button {
      width: 70vw;
      max-width: 360px;
      padding: 24px;
      @apply(--base-shadow-and-inset);
      font-size: 20px;
      text-shadow: -1px 1px 8px rgba(249,85,85,0.2), 1px -1px 18px rgba(249,85,85,0.2);
    }

    .synclink {
      width: 100%;
      box-sizing: border-box;
      padding: 20px 0px 20px 0px;

    }
    .synclink a {
      color:var(--ac-red);
      box-sizing: border-box;
      padding: 3px 0px 3px 0px;
      text-decoration: none;
      border-bottom: 1px dotted var(--ac-red);
      opacity: 0.35;
      font-size: 12px;
      line-height: 14px;
    }


    </style>

    <app-route route="{{route}}" pattern="/:page" data="{{data}}"></app-route>
    <ac-sizeview sizeview=“{{sizeview}}”></ac-sizeview>

    <div class="topback">
      <span class="flex"></span>
      <template is="dom-if" if="{{!_is(data.page,'welcome')}}">
        <ac-button icon="ac-decline" bg="btncolor" txtcolor="white" on-tap="exit" verysmall>back</ac-button>
      </template>
    </div>

    <neon-animated-pages id="createwalletpgs" attr-for-selected="data-page" selected="[[data.page]]" entry-animation="slide-from-right-animation" exit-animation="slide-left-animation">
      <neon-animatable data-page="welcome">
        <div class="total vertic logo_canvas">
          <div class="logo">
            <ac-icon icon="ac-brandlogo-color" big></ac-icon>
            <p>arcade.city</p>
          </div>
          <div class="logo_whitespace"></div>
            <ac-button on-tap="totokenquestion" txtbtn bg="btncolor" txtcolor="red">start new</ac-button>
            <div class="synclink"><a on-tap>sync with a device / backup-file</a></div>
        </div>
      </neon-animatable>

      <neon-animatable data-page="first">
          <div class="total vertic">
          <p class="red">Do you own ARC-tokens?</p>
          <div class="whitespace"></div>
          <div class="whitespace"></div>
          <div class="yesnobtns vertic">
            <ac-button big class="yesno" bg="btncolor" txtcolor="red" on-tap="toimportwallet" txtbtn>Yes</ac-button>
            <ac-button big class="yesno" bg="btncolor" txtcolor="red" on-tap="tocreatewallet" txtbtn>No</ac-button>
          </div>
        </div>
      </neon-animatable>

      <neon-animatable data-page="importwallet">
        <div class="total vertic">
          <p class="red">Do you have an ARC-Wallet json-file?</p>
          <div class="whitespace"></div>
          <div class="whitespace"></div>
          <div class="yesnobtns vertic">
            <ac-button big class="yesno" bg="btncolor" txtcolor="red" on-tap="touploadjson" txtbtn>Yes</ac-button>
            <ac-button big class="yesno" bg="btncolor" txtcolor="red" on-tap="toprivatekey" txtbtn>No</ac-button>
          </div>
        </div>
      </neon-animatable>
    </neon-animated-pages>
  </template>

  <script>
    Polymer({

      is: 'ac-intro',

      properties: {
        // state: {
        //   type: String,
        //   value: 'intro'
        // },
        sizeview: {
          type: String,
          observer: '_sizeview'
        },
        route: {
          type: Object,
          notify: true
        },

      },

      observers: [
          '_onRoutePathChanged(data.page)'
        ],

        toon: function(a){
          return JSON.stringify(a);
        },

      _onRoutePathChanged: function(page) {

        // switch (page) {
           // case '':
           //  this.set('route.path', '/welcome');

        //   case 'importpkmakewallet':
        //   case 'importfile':
        //   case 'createnew':
        //     if (this.hasVault()) {
        //       console.log('You already have a vault');
        //     }
        //     break;
        //   default:
        //     if (!this.hasVault()) {
        //       return this.fire('novault');
        //     };
        //     if (!this.password) {
        //       return this.fire('locked');
        //     }
            // break;

        // }
      },
      ready: function() {},

      exit: function(){
        this.set('route.path', '/welcome');
      },

      totokenquestion: function() {
        this.set('route.path', '/first');
//        this.state = 'first';
      },

      toimportwallet: function() {
        this.set('route.path', '/importwallet');
//        this.state = 'importwallet';
      },

      toprivatekey: function() {
        this.fire('importpk');
      },

      touploadjson: function() {
        this.fire('importfile');
      },

      tocreatewallet: function() {
        this.fire('newvault');
      },
      _sizeview: function() {
        switch (this.sizeview) {
          case 'phone':
            this.arcalign = 'verticcenter';
            this.customStyle['--ac-balance-height'] = '30vh';
            this.customStyle['--ac-balance-width'] = '100%';
            this.customStyle['--tokentrans-width'] = '100%';
            this.customStyle['--tokentrans-top'] = '0vh';
            this.updateStyles();
            break;
          case 'desktop':
            this.arcalign = 'verticstart';
            this.customStyle['--ac-balance-height'] = '20vh';
            this.customStyle['--ac-balance-width'] = '100%';
            this.customStyle['--tokentrans-top'] = '3vh';
            this.updateStyles();
            break;
          case 'xlarge':
            this.arcalign = 'verticstart';
            this.customStyle['--ac-balance-height'] = '20vh';
            this.customStyle['--ac-balance-width'] = '100%';
            this.customStyle['--tokentrans-top'] = '4vh';

            this.updateStyles();
            break;
          default:
            console.log("!!! ** Niks");
        }
      },

      _is: function(a, b) {
        if (b === undefined) {
          b = true;
        }
        return a === b;
      },




    });
  </script>
</dom-module>
