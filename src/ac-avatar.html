<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/ac-style/ac-style.html">

<dom-module id="ac-avatar">
  <template>
    <style>
      :host {
        display: inline-block;
      }

      h1 {
       @apply(--ac-font-h1);
      }
      h2 {
       @apply(--ac-font-h2);
      }
      h3 {
       @apply(--ac-font-h3);
      }
      h4 {
       @apply(--ac-font-h4);
      }
      p {
       @apply(--ac-font-body1);
      }



      .arc-avatar {
        display: inline-block;
        width: 100%;
        @apply(--layout-horizontal);
        @apply(--layout-start-justified);
      }


      .arc-avatar:hover {
        cursor: pointer;
      }


      .small {
        width: 40px;
        height: 40px;
        min-width: 40px;
        min-height: 40px;
        overflow: hidden;
        border-radius: 50%;
      }

      .small img {
        width: 100%;
        height: 100%;
      }

      .big {
        width: 120px;
        height: 120px;
        min-width: 120px;
        min-height: 120px;
        overflow: hidden;
        border-radius: 50%;
      }

      .big img {
        width: 100%;
        height: 100%;
      }

      .username-big {
        width: 100%;
        @apply(--layout-vertical);
        @apply(--layout-center-justified);
        @apply(--layout-start);
        /*color: #7157D9;*/
        color: var(--ac-white);
        box-sizing: border-box;
        padding-left: 10px;
      }

      .username-big p {
        @apply(--montserrat-semibold);
        font-size: 13px;
        line-height: 16px;
      }

      .pub {
        width: 80px;
      }

      .pub p {
        font-size: 9px;
        line-height: 13px;
        @apply(--montserrat-reg);
        @apply(--ac-font-nowrap);
        opacity: 0.4;
      }


    </style>


    <template is="dom-if" if="{{_is(mode, 'imgandtxt')}}">
      <div class="arc-avatar">
        <div class$="avatar {{size}}">
          <img src="{{identity.avatarurl}}">
        </div>
        <div class="username-big">
          <p>{{identity.username}}</p>
          <div class="pub"><p>{{identity.pubkey}}</p></div>
        </div>
      </div>
    </template>


    <template is="dom-if" if="{{_is(mode, 'txtonly')}}">
      <div><p>txtonly</p></div>
    </template>

    <template is="dom-if" if="{{_is(mode, 'imgonly')}}">
        <div class$="avatar {{size}}">
          <img src="{{artwork}}">
        </div>
    </template>

  </template>

  <script>
    Polymer({

      is: 'ac-avatar',

      properties: {
        mode: {
          type: String,
          value: 'imgandtxt',
        },
        size: {
          type: String,
          value: 'big',
        },
        identity: {
          type: Object
        },
        pubkey: {
          type: String,
          value: 'ff9980effO'
        }
      },

      observers: [
        'userListChanged(identity.*, filter)'
      ],

      _is: function(a, b) {
        if (b === undefined){
          b = true;
        }
        //console.log(a ,'(',typeof a,') is',b,'(',typeof b,') they are equal for ==',a == b,', they are equal for ===',a === b);
        return a === b;
      },

    });
  </script>
</dom-module>
