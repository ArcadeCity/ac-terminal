<link rel="import" href="../bower_components/polymer/polymer.html">
<script src="/bower_components/web3/dist/web3.min.js"></script>

<dom-module id="ac-web3">
  <script>

    var acweb3_web3;

    Polymer({
      is: 'ac-web3',
      properties: {
        web3: {
          type: Object,
          notify: true
        },
        host: {
          type: String,
          observer: '_host'
        }
      },

      _host: function(){
        this.initweb3();        
      },

      attached: function(){
        console.log('ac-web3 -> attached');
        this.initweb3();
      },

      initweb3: function(){
        console.log('ac-web3 -> initweb3');
        if (!this.host){
          return;
        }
        if (!acweb3_web3){
          acweb3_web3 = new Web3(new web3.providers.HttpProvider(this.host));
          console.log('ac-web3 -> created Web3');
        }
        this.web3 = acweb3_web3;
      }
    });
  </script>
</dom-module>
